# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

enum ActivityType {
  LESSON
  QUIZ
  DAILY_GOAL
}

type User {
  id: Int!
  email: String!
  name: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Quiz {
  id: Int!
  question: String!
  options: [String!]!
  answer: String!
  level: String!
  lessonId: Int
  createdAt: DateTime!
}

type Lesson {
  id: Int!
  title: String!
  level: String!
  content: String
  quizzes: [Quiz!]
  createdAt: DateTime!
}

type Progress {
  id: Int!
  userId: Int!
  xp: Int!
  level: Int!
  levelProgress: Float!
  streak: Int!
  lessonsDone: Int!
  quizzesDone: Int!
  lastActive: String!
  createdAt: String!
  updatedAt: String!
  user: User!
}

type AuthResponse {
  access_token: String!
  user: User
}

type Progress {
  id: Int!
  userId: Int!
  xp: Int!
  streak: Int!
  lessonsDone: Int!
  quizzesDone: Int!
  lastActive: DateTime!
  createdAt: DateTime!
  updatedAt: DateTime!
  level: Int
  levelProgress: Int
  user: User!
}

type Query {
  helloUser: String!
  lessons: [Lesson!]!
  lessonsByLevel(level: String!): [Lesson!]!
  lesson(id: Int!): Lesson
  quizzes: [Quiz!]!
  quizzesByLevel(level: String!): [Quiz!]!
  quizzesByLesson(lessonId: Int!): [Quiz!]!
  quiz(id: Int!): Quiz
  getUserProgress: Progress!
  getAudioUrl(id: "audio_id_here")
}

type Mutation {
  register(email: String!, password: String!, name: String): User!
  login(email: String!, password: String!): AuthResponse!
  deleteUser(id: Int!): String!
  createLesson(title: String!, level: String!, content: String): Lesson!
  updateLesson(id: Int!, title: String, level: String, content: String): Lesson!
  deleteLesson(id: Int!): Lesson!
  createQuiz(question: String!, options: [String!]!, answer: String!, level: String!, lessonId: Int): Quiz!
  updateQuiz(id: Int!, question: String, options: [String!], answer: String, level: String, lessonId: Int): Quiz!
  deleteQuiz(id: Int!): Quiz!
  completeLesson(accuracy: Int): Progress!
  completeQuiz(score: Int): Progress!
  updateUserProgress(xp: Int, streak: Int, lessons: Int, activityType: String, accuracy: Int, score: Int): Progress!
  uploadAudio(file: $file, lessonId: $lessonId)

}